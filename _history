{"entries":[{"timestamp":1728567368972,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"http"],[-1,"s"],[0,"://"],[-1,"developers.google.com/blockly/xml\"><variables></variables><block type=\"device_forever\" x=\"36\" y=\"67\"><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"IMLledbutton_isbush\"><field name=\"pin\">DigitalPin.P1</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement></block></statement></block>"],[1,"www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n"],[0,"</xm"]],"start1":12,"start2":12,"length1":588,"length2":113}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"basic.forever(function () {\n    if (IMLledbutton.isbush(DigitalPin.P1)) {\n        basic.showIcon(IconNames.Heart)\n    } else {\n        basic.clearScreen()\n    }\n})"],[0,"\n"]],"start1":0,"start2":0,"length1":164,"length2":1}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,".md\""],[-1,",\n        \"ledbutton.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\""],[1,"\n    ],\n    \"additionalFilePaths\": []"],[0,"\n}\n"]],"start1":220,"start2":220,"length1":69,"length2":44}]},{"type":"added","filename":"ledbutton.ts","value":"/**\n * Custom blocks\n */\n//% weight=100 color=#0fbc11 icon=\"\" block=\"LEDボタン\"\nnamespace IMLledbutton {\n\n    //% block\n    //% block=\"押されている %pin\"\n    //% weight=100   \n    export function isbush(pin: DigitalPin): boolean {\n        pins.setPull(pin, PinPullMode.PullNone)\n\n        if (pins.digitalReadPin(pin) == 1) {\n            return true\n        }\n        else {\n            return false\n        }\n    }\n}\n"}]},{"timestamp":1728567546067,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0," {\n\n"],[-1,"    pinMode(ledPin, OUTPUT);\n    digitalWrite(ledPin, ledState);\n\n"],[0,"    "]],"start1":100,"start2":100,"length1":74,"length2":8},{"diffs":[[0,"oolean {"],[1,"\n        pins.setPull(pin, PinPullMode.PullNone)"],[0,"\n\n      "]],"start1":214,"start2":214,"length1":16,"length2":64}]}]},{"timestamp":1728568102660,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[-1,"0"],[1,"36"],[0,"\" y=\""],[-1,"0"],[1,"67"],[0,"\"><s"]],"start1":106,"start2":106,"length1":15,"length2":17}]},{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"edbutton {\n\n"],[1,"    pinMode(ledPin, OUTPUT);\n    digitalWrite(ledPin, ledState);\n\n"],[0,"    //% bloc"]],"start1":92,"start2":92,"length1":24,"length2":90}]}]},{"timestamp":1728568496410,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"olean {\n"],[-1,"        "],[0,"\n       "]],"start1":215,"start2":215,"length1":24,"length2":16}]}]},{"timestamp":1728568966789,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[-1,"36"],[1,"0"],[0,"\" y=\""],[-1,"67"],[1,"0"],[0,"\"><s"]],"start1":106,"start2":106,"length1":17,"length2":15}]}]},{"timestamp":1728569885830,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":272,"start2":272,"length1":21,"length2":17}]}]},{"timestamp":1728570397056,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[-1,"0"],[1,"36"],[0,"\" y=\""],[-1,"0"],[1,"67"],[0,"\"><s"]],"start1":106,"start2":106,"length1":15,"length2":17},{"diffs":[[0,"in.P"],[-1,"2"],[1,"1"],[0,"</fi"]],"start1":350,"start2":350,"length1":9,"length2":9}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"in.P"],[-1,"2"],[1,"1"],[0,")) {"]],"start1":64,"start2":64,"length1":9,"length2":9}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":272,"start2":272,"length1":17,"length2":21}]},{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"urn "],[-1,"fals"],[1,"tru"],[0,"e\n  "]],"start1":292,"start2":292,"length1":12,"length2":11},{"diffs":[[0,"         return "],[-1,"tru"],[1,"fals"],[0,"e\n        }\n    "]],"start1":329,"start2":329,"length1":35,"length2":36}]}]},{"timestamp":1728570585045,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"        "],[-1,"se"],[0,"\n       "]],"start1":223,"start2":223,"length1":18,"length2":16}]}]},{"timestamp":1728571858315,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"      se"],[-1,"t"],[0,"\n       "]],"start1":225,"start2":225,"length1":17,"length2":16}]}]},{"timestamp":1728571859496,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"    "],[-1,"let buttonpin=DigitalPin.P2\n    let ledpin=DigitalPin.P1\n    let mode=\n\n    enum buttonmode {\n        //% block=\"トグルボタン\"\n        toggle = 1,\n        //% block=\"プッシュボタン\"\n        push = 2\n    }\n\n    //% block=\"モード設定 %mode\"\n    //% weight=100\n    export function setmode(mode: buttonmode){\n        \n    }\n"],[1,"//% block"],[0,"\n   "]],"start1":104,"start2":104,"length1":310,"length2":17},{"diffs":[[0," set"],[-1,"pin(pin)"],[0,"\n   "]],"start1":230,"start2":230,"length1":16,"length2":8},{"diffs":[[0,"ReadPin("],[-1,"button"],[0,"pin) == "]],"start1":259,"start2":259,"length1":22,"length2":16},{"diffs":[[0,"  }\n"],[-1,"    function setpin(pin: DigitalPin)\n    {\n        switch(pin){\n            case DigitalPin.P1:\n                buttonpin=DigitalPin.P2\n                ledpin=DigitalPin.P1\n                break\n        }\n    }\n"],[0,"}\n"]],"start1":366,"start2":366,"length1":217,"length2":6}]}]},{"timestamp":1728572456850,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"n.is"],[-1,"p"],[1,"b"],[0,"ush("]],"start1":47,"start2":47,"length1":9,"length2":9}]},{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"tton {\n\n"],[1,"    let buttonpin=DigitalPin.P2\n    let ledpin=DigitalPin.P1\n    let mode=\n\n"],[0,"    enum"]],"start1":96,"start2":96,"length1":16,"length2":92},{"diffs":[[0," }\n\n"],[-1,"    let buttonpin=DigitalPin.P2\n    let ledpin=DigitalPin.P1\n    let mode=buttonmode.push\n    let status=0\n\n"],[0,"    "]],"start1":297,"start2":297,"length1":116,"length2":8},{"diffs":[[0,"etmode(m"],[1,"ode"],[0,": button"]],"start1":369,"start2":369,"length1":16,"length2":19},{"diffs":[[0,"    "],[-1,"mode=m"],[0,"\n   "]],"start1":399,"start2":399,"length1":14,"length2":8},{"diffs":[[0,"ction is"],[-1,"p"],[1,"b"],[0,"ush(pin:"]],"start1":475,"start2":475,"length1":17,"length2":17},{"diffs":[[0,"e {\n"],[-1,"            if( mode == buttonmode.toggle ){\n                if( status == 0 ){\n                    status = 1;\n                    pins.digitalWritePin(ledpin,1)\n                }\n                else{\n                    status = 0;\n                    pins.digitalWritePin(ledpin,0)\n                }\n                basic.pause(100)\n            }\n"],[0,"    "]],"start1":633,"start2":633,"length1":359,"length2":8},{"diffs":[[0,"    }\n    }\n"],[-1,"\n"],[0,"    function"]],"start1":665,"start2":665,"length1":25,"length2":24},{"diffs":[[0,"   }"],[-1,"\n\n    const BUTTON_EVENT_ID = 1001\n    const BUTTON_PRESSED = 1\n    let buttonPin = DigitalPin.P1\n    let lastState = 0\n\n    // ボタンが押されたときのイベントハンドラ\n    //% blockId=on_button_pressed block=\"ボタンが押されたとき\"\n    export function onButtonPressed(handler: () => void): void {\n        control.onEvent(BUTTON_EVENT_ID, BUTTON_PRESSED, handler)\n    }\n\n    // ボタンの状態を定期的にチェック\n    control.inBackground(function () {\n        while (true) {\n            let currentState = pins.digitalReadPin(buttonPin)\n            if (currentState == 1 && lastState == 0) {\n                // ボタンが押されたときにイベントを発生\n                control.raiseEvent(BUTTON_EVENT_ID, BUTTON_PRESSED)\n            }\n            lastState = currentState\n            basic.pause(50) // 50msごとにチェック\n        }\n    })"],[0,"\n}\n"]],"start1":883,"start2":883,"length1":764,"length2":7}]}]},{"timestamp":1728573043684,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"us=0"],[-1,"\n    const BUTTON_PRESSED = 1"],[0,"\n\n  "]],"start1":327,"start2":327,"length1":37,"length2":8}]}]},{"timestamp":1728573769807,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0," = 1001\n"],[1,"    const BUTTON_PRESSED = 1\n"],[0,"    let "]],"start1":1330,"start2":1330,"length1":16,"length2":45}]}]},{"timestamp":1728573778250,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0," }\n\n"],[-1,"    const BUTTON_PRESSED = 0\n    const BUTTON_EVENT_ID = 1001\n"],[0,"    "]],"start1":221,"start2":221,"length1":70,"length2":8},{"diffs":[[0,"    let "],[-1,"pushing=false"],[1,"status=0\n    const BUTTON_PRESSED = 1"],[0,"\n\n    //"]],"start1":315,"start2":315,"length1":29,"length2":53},{"diffs":[[0,"e=m\n"],[-1,"        pushing=false\n"],[0,"    "]],"start1":464,"start2":464,"length1":30,"length2":8},{"diffs":[[0," == "],[-1,"BUTTON_PRESSED"],[1,"1"],[0,") {\n"],[1,"            return false\n        }\n        else {\n"],[0,"    "]],"start1":642,"start2":642,"length1":26,"length2":63},{"diffs":[[0,"if( "],[-1,"pushing == false"],[1,"status == 0"],[0," ){\n"]],"start1":762,"start2":762,"length1":24,"length2":19},{"diffs":[[0,"    "],[-1,"pushing = true"],[1,"status = 1"],[0,";\n  "]],"start1":797,"start2":797,"length1":22,"length2":18},{"diffs":[[0,",1)\n"],[-1,"                    control.raiseEvent(BUTTON_EVENT_ID, BUTTON_PRESSED)\n"],[0,"    "]],"start1":860,"start2":860,"length1":80,"length2":8},{"diffs":[[0,"  }\n"],[-1,"        else{\n            return false\n        }\n"],[0,"    "]],"start1":1082,"start2":1082,"length1":57,"length2":8},{"diffs":[[0,"   }\n    }\n\n"],[1,"    const BUTTON_EVENT_ID = 1001\n    let buttonPin = DigitalPin.P1\n    let lastState = 0\n\n"],[0,"    // ボタンが押"]],"start1":1293,"start2":1293,"length1":24,"length2":114},{"diffs":[[0,"r)\n    }"],[1,"\n\n    // ボタンの状態を定期的にチェック\n    control.inBackground(function () {\n        while (true) {\n            let currentState = pins.digitalReadPin(buttonPin)\n            if (currentState == 1 && lastState == 0) {\n                // ボタンが押されたときにイベントを発生\n                control.raiseEvent(BUTTON_EVENT_ID, BUTTON_PRESSED)\n            }\n            lastState = currentState\n            basic.pause(50) // 50msごとにチェック\n        }\n    })"],[0,"\n}\n"]],"start1":1603,"start2":1603,"length1":11,"length2":431}]}]},{"timestamp":1728574166417,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"let "],[-1,"beforestatus=false\n    let togglestatus"],[1,"pushing"],[0,"=fal"]],"start1":381,"start2":381,"length1":47,"length2":15},{"diffs":[[0,"    "],[-1,"beforestatus=true\n            return"],[1,"if( mode == buttonmode.toggle ){\n                if( pushing == false ){\n                    pushing ="],[0," true"],[1,";"],[0,"\n   "]],"start1":732,"start2":732,"length1":49,"length2":116},{"diffs":[[0,"    "],[-1,"}\n"],[1,"    "],[0,"        "],[-1,"else{\n            if(beforestatus==true){\n                beforestatus=false;\n                if(mode==buttonmode.toggle && togglestatus){\n\n                }\n            }"],[1,"pins.digitalWritePin(ledpin,1)\n                    control.raiseEvent(BUTTON_EVENT_ID, BUTTON_PRESSED)\n                }\n                else{\n                    status = 0;\n                    pins.digitalWritePin(ledpin,0)\n                }\n                basic.pause(100)\n            }\n            return true\n        }\n        else{"],[0,"\n   "]],"start1":849,"start2":849,"length1":189,"length2":358}]}]},{"timestamp":1728574764147,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0," mode=m\n"],[1,"        pushing=false\n"],[0,"    }\n\n "]],"start1":530,"start2":530,"length1":16,"length2":38},{"diffs":[[0,"ggle"],[-1,"){\n                    if(togglestatus==false){\n                        togglestatus=true;\n                        pins.digitalWritePin(ledpin,1)\n                    }\n                    else{\n                        pins.digitalWritePin(ledpin, 0)\n                    }"],[1," && togglestatus){\n"],[0,"\n   "]],"start1":944,"start2":944,"length1":279,"length2":27}]}]},{"timestamp":1728575000596,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"= 0\n"],[-1,"    const BUTTON_PRESSED = 0\n"],[0,"    "]],"start1":250,"start2":250,"length1":37,"length2":8}]}]},{"timestamp":1728598860434,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0," BUTTON_"],[1,"PRESSED"],[0," = 0\n   "]],"start1":263,"start2":263,"length1":16,"length2":23}]}]},{"timestamp":1728598863595,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[-1,"39"],[1,"0"],[0,"\" y=\""],[-1,"69"],[1,"0"],[0,"\"><s"]],"start1":106,"start2":106,"length1":17,"length2":15},{"diffs":[[0,"name=\"IF0\"><"],[1,"shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><"],[0,"block type=\""]],"start1":208,"start2":208,"length1":24,"length2":93},{"diffs":[[0,"utton_is"],[-1,"p"],[1,"b"],[0,"ush\"><fi"]],"start1":308,"start2":308,"length1":17,"length2":17},{"diffs":[[0,"talPin.P"],[-1,"1"],[1,"2"],[0,"</field>"]],"start1":344,"start2":344,"length1":17,"length2":17}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"in.P"],[-1,"1"],[1,"2"],[0,")) {"]],"start1":64,"start2":64,"length1":9,"length2":9}]},{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"ESSED = "],[-1,"true"],[1,"0"],[0,"\n    con"]],"start1":244,"start2":244,"length1":20,"length2":17},{"diffs":[[0,"TON_"],[-1,"RELEASED = false"],[1," = 0"],[0,"\n   "]],"start1":267,"start2":267,"length1":24,"length2":12},{"diffs":[[0,"tonmode."],[-1,"toggle"],[1,"push"],[0,"\n    let"]],"start1":386,"start2":386,"length1":22,"length2":20},{"diffs":[[0,"estatus="],[-1,"BUTTON_RELEASED"],[1,"false"],[0,"\n    let"]],"start1":412,"start2":412,"length1":31,"length2":21},{"diffs":[[0,"mode"],[-1,", pin: DigitalPin){\n        setpin(pin)"],[1,"){\n        mode=m"],[0,"\n    "],[1,"}\n\n"],[0,"    "],[-1,"mode=m\n    }\n    \n    basic.forever(function() {"],[1,"//% block=\"押されている %pin\"\n    //% weight=100   \n    export function ispush(pin: DigitalPin): boolean {\n        setpin(pin)"],[0,"\n   "]],"start1":538,"start2":538,"length1":104,"length2":157},{"diffs":[[0,") {\n            "],[-1,"if ("],[0,"beforestatus == "]],"start1":752,"start2":752,"length1":36,"length2":32},{"diffs":[[0,"atus"],[-1," == BUTTON_RELEASED) {\n                /* 押された！ */\n                beforestatus = BUTTON_PRESSED\n    "],[1,"=true\n            return true\n"],[0,"    "]],"start1":776,"start2":776,"length1":109,"length2":38},{"diffs":[[0,"e\n        }\n"],[-1,"        }\n"],[0,"        else"]],"start1":808,"start2":808,"length1":34,"length2":24},{"diffs":[[0,"  }\n        else"],[-1," "],[0,"{\n            if"]],"start1":816,"start2":816,"length1":33,"length2":32},{"diffs":[[0,"      if"],[-1," "],[0,"(befores"]],"start1":840,"start2":840,"length1":17,"length2":16},{"diffs":[[0,"restatus"],[-1," "],[0,"=="],[-1," BUTTON_PRESSED) "],[1,"true)"],[0,"{\n      "]],"start1":853,"start2":853,"length1":36,"length2":23},{"diffs":[[0,"    "],[-1,"/* 離された！ */\n                beforestatus = BUTTON_RELEASED\n"],[1,"beforestatus=false;"],[0,"\n   "]],"start1":882,"start2":882,"length1":67,"length2":27},{"diffs":[[0,"  if"],[-1," "],[0,"(mode"],[-1," "],[0,"=="],[-1," "],[0,"butt"]],"start1":920,"start2":920,"length1":18,"length2":15},{"diffs":[[0,".toggle)"],[-1," "],[0,"{\n      "]],"start1":941,"start2":941,"length1":17,"length2":16},{"diffs":[[0,"      if"],[-1," "],[0,"(toggles"]],"start1":965,"start2":965,"length1":17,"length2":16},{"diffs":[[0,"atus"],[-1," "],[0,"=="],[-1," "],[0,"false)"],[-1," "],[0,"{\n  "]],"start1":982,"start2":982,"length1":19,"length2":16},{"diffs":[[0,"lestatus"],[-1," = "],[1,"="],[0,"true;\n  "]],"start1":1024,"start2":1024,"length1":19,"length2":17},{"diffs":[[0,"(ledpin,"],[-1," "],[0,"1)\n     "]],"start1":1083,"start2":1083,"length1":17,"length2":16},{"diffs":[[0,"else"],[-1," {\n                        togglestatus = false;"],[1,"{"],[0,"\n   "]],"start1":1136,"start2":1136,"length1":56,"length2":9},{"diffs":[[0,"    "],[-1,"}\n"],[0,"    "],[-1,"})\n\n    //% block=\"押されている %pin\"\n    //% weight=100   \n    export function ispush(pin: DigitalPin): boolean {\n        return beforestatus"],[1,"return false\n        }"],[0,"\n   "]],"start1":1256,"start2":1256,"length1":150,"length2":34}]}]},{"timestamp":1728599451654,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[-1,"0"],[1,"39"],[0,"\" y=\""],[-1,"0"],[1,"69"],[0,"\"><s"]],"start1":106,"start2":106,"length1":15,"length2":17},{"diffs":[[0,"tation><"],[1,"value name=\"IF0\"><block type=\"IMLledbutton_ispush\"><field name=\"pin\">DigitalPin.P1</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement><"],[0,"/block><"]],"start1":196,"start2":196,"length1":16,"length2":312}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"in.P"],[-1,"2"],[1,"1"],[0,")) {"]],"start1":64,"start2":64,"length1":9,"length2":9}]},{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[-1,"basic.forever(function () {\n    if (IMLledbutton.ispush(DigitalPin.P1)) {\n        basic.showIcon(IconNames.Heart)\n    } else {\n        basic.clearScreen("],[1,"/**\n * Custom blocks\n */\n//% weight=100 color=#0fbc11 icon=\"\" block=\"LEDボタン\"\nnamespace IMLledbutton {\n\n    enum buttonmode {\n        //% block=\"トグルボタン\"\n        toggle = 1,\n        //% block=\"プッシュボタン\"\n        push = 2\n    }\n\n    const BUTTON_PRESSED = true\n    const BUTTON_RELEASED = false\n    const BUTTON_EVENT_ID = 1001\n    let buttonpin=DigitalPin.P2\n    let ledpin=DigitalPin.P1\n    let mode=buttonmode.toggle\n    let beforestatus=BUTTON_RELEASED\n    let togglestatus=false\n\n    //% block=\"モード設定 %mode\"\n    //% weight=100\n    export function setmode(m: buttonmode, pin: DigitalPin){\n        setpin(pin)\n        mode=m\n    }\n    \n    basic.forever(function() {\n        if (pins.digitalReadPin(buttonpin) == BUTTON_PRESSED) {\n            if (beforestatus == BUTTON_RELEASED) {\n                /* 押された！ */\n                beforestatus = BUTTON_PRESSED\n            }\n        }\n        else {\n            if (beforestatus == BUTTON_PRESSED) {\n                /* 離された！ */\n                beforestatus = BUTTON_RELEASED\n\n                if (mode == buttonmode.toggle) {\n                    if (togglestatus == false) {\n                        togglestatus = true;\n                        pins.digitalWritePin(ledpin, 1)\n                    }\n                    else {\n                        togglestatus = false;\n                        pins.digitalWritePin(ledpin, 0)\n                    }\n                }\n            }\n        }\n    })\n\n    //% block=\"押されている %pin\"\n    //% weight=100   \n    export function ispush(pin: DigitalPin): boolean {\n        return beforestatus\n    }\n\n    function setpin(pin: DigitalPin)\n    {\n        switch(pin){\n            case DigitalPin.P1:\n                buttonpin=DigitalPin.P2\n                ledpin=DigitalPin.P1\n                break\n        }\n    }\n\n    // ボタンが押されたときのイベントハンドラ\n    //% blockId=on_button_pressed block=\"ボタンが押されたとき\"\n    export function onButtonPressed(handler: () => void): void {\n        control.onEvent(BUTTON_EVENT_ID, BUTTON_PRESSED, handler"],[0,")\n  "]],"start1":0,"start2":0,"length1":157,"length2":2007},{"diffs":[[0,"\n    }\n}"],[-1,")"],[0,"\n"]],"start1":2004,"start2":2004,"length1":10,"length2":9}]}]},{"timestamp":1728600001015,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,") {\n"],[-1,"\n})\n\n\n\n//% block=\"モード設定 %m %pin\"\n//% weight=100   \nexport function "],[1,"    if (IMLledbutton."],[0,"ispush("],[-1,"m: buttonmode, pin: DigitalPin): boolean {\n    return pressstatus\n}\n\n//% block=\"押されている %pin\"\n//% weight=100   \nexport function ispush(pin: DigitalPin): boolean {\n    return pressstatus"],[1,"DigitalPin.P1)) {\n        basic.showIcon(IconNames.Heart)\n    } else {\n        basic.clearScreen()\n    }"],[0,"\n}"],[1,")"],[0,"\n"]],"start1":24,"start2":24,"length1":265,"length2":140}]}]},{"timestamp":1728600220139,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0," {\n\n})\n\n"],[-1,"e"],[0,"\n\n//% bl"]],"start1":25,"start2":25,"length1":17,"length2":16}]}]},{"timestamp":1728601926449,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,")\n\ne"],[-1,"num"],[0,"\n\n//"]],"start1":30,"start2":30,"length1":11,"length2":8}]}]},{"timestamp":1728601927928,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"})\n\n"],[-1,"namespace IMLledbutton\n{\n\n    enum ButtonMode {\n        //% block=\"トグルボタン\"\n        toggle = 1,\n        //% block=\"プッシュボタン\"\n        push = 2\n    }\n\n    const BUTTON_PRESSED = 0\n    const BUTTON_RELEASED = 1\n    let beforestatus = BUTTON_RELEASED\n    let pressstatus = false;\n    let mode = ButtonMode.toggle;\n    let buttonpin = DigitalPin.P2\n    let ledpin = DigitalPin.P1\n\n    "],[1,"enum\n\n"],[0,"//% "]],"start1":29,"start2":29,"length1":386,"length2":14},{"diffs":[[0,"設定 %m %pin\"\n"],[-1,"    "],[0,"//% weight=1"]],"start1":53,"start2":53,"length1":28,"length2":24},{"diffs":[[0,"% weight=100   \n"],[-1,"    "],[0,"export function "]],"start1":67,"start2":67,"length1":36,"length2":32},{"diffs":[[0,"ion "],[-1,"setomode"],[1,"ispush"],[0,"(m: "],[-1,"B"],[1,"b"],[0,"utton"],[-1,"M"],[1,"m"],[0,"ode,"]],"start1":95,"start2":95,"length1":27,"length2":25},{"diffs":[[0,"Pin)"],[-1," {\n        mode = m;\n        setpin(pin)\n    }\n\n    "],[1,": boolean {\n    return pressstatus\n}\n\n"],[0,"//% "]],"start1":133,"start2":133,"length1":60,"length2":46},{"diffs":[[0,"る %pin\"\n"],[-1,"    "],[0,"//% weig"]],"start1":191,"start2":191,"length1":20,"length2":16},{"diffs":[[0,"=100   \n"],[-1,"    "],[0,"export f"]],"start1":209,"start2":209,"length1":20,"length2":16},{"diffs":[[0,"olean {\n"],[-1,"    "],[0,"    retu"]],"start1":260,"start2":260,"length1":20,"length2":16},{"diffs":[[0,"tus\n"],[-1,"    }\n\n    function setpin(pin: DigitalPin){\n        switch(pin){\n            case DigitalPin.P1:\n                buttonpin = DigitalPin.P2\n                ledpin = DigitalPin.P1\n                break;\n        }\n    }\n\n    basic.forever(function() {\n        if( pins.digitalReadPin(buttonpin) == BUTTON_PRESSED )\n        {\n            if( beforestatus == BUTTON_RELEASED ){\n                /* 押された */\n                beforestatus = BUTTON_PRESSED\n            }\n            \n        }        \n    })\n"],[0,"}\n"]],"start1":287,"start2":287,"length1":505,"length2":6}]}]},{"timestamp":1728602526750,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ock "],[-1,"type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"IMLledbutton_setomode\"><field name=\"m\">IMLledbutton.ButtonMode.toggle</field><field name=\"pin\">DigitalPin.P1</field></block></statement></block><block "],[0,"type"]],"start1":81,"start2":81,"length1":230,"length2":8},{"diffs":[[0," x=\""],[-1,"315"],[1,"0"],[0,"\" y="]],"start1":106,"start2":106,"length1":11,"length2":9},{"diffs":[[0,"on><"],[-1,"value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"IMLledbutton_ispush\"></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement><"],[0,"/blo"]],"start1":198,"start2":198,"length1":334,"length2":8}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"IMLledbutton.setomode(IMLledbutton.ButtonMode.toggle, DigitalPin.P1)\n"],[0,"basi"]],"start1":0,"start2":0,"length1":73,"length2":4},{"diffs":[[0,".ispush("],[1,"DigitalPin.P2"],[0,")) {\n   "]],"start1":48,"start2":48,"length1":16,"length2":29}]},{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"})\n\n"],[-1,"/**\n * Custom blocks\n */\n//% weight=100 color=#0fbc11 icon=\"\" block=\"LEDボタン\"\n"],[0,"name"]],"start1":29,"start2":29,"length1":86,"length2":8},{"diffs":[[0,"utton\n{\n"],[-1," "],[1,"\n"],[0,"   "],[-1,"export"],[0," enum Bu"]],"start1":50,"start2":50,"length1":26,"length2":20},{"diffs":[[0,"    let "],[-1,"press"],[1,"before"],[0,"status ="]],"start1":239,"start2":239,"length1":21,"length2":22},{"diffs":[[0,"s = "],[-1,"false\n    let beforetoggle"],[1,"BUTTON_RELEASED\n    let pressstatus"],[0," = false"],[1,";"],[0,"\n   "]],"start1":258,"start2":258,"length1":42,"length2":52},{"diffs":[[0,"    let "],[-1,"button"],[0,"mode = B"]],"start1":307,"start2":307,"length1":22,"length2":16},{"diffs":[[0,"tomode(m"],[-1,"ode"],[0,": Button"]],"start1":481,"start2":481,"length1":19,"length2":16},{"diffs":[[0,"    "],[-1,"button"],[0,"mode = m"],[-1,"ode"],[0,";\n  "]],"start1":526,"start2":526,"length1":25,"length2":16},{"diffs":[[0,"in)\n"],[-1,"        pins.digitalWritePin(ledpin, 0)\n"],[0,"    "]],"start1":556,"start2":556,"length1":48,"length2":8},{"diffs":[[0,"=\"押されている"],[1," %pin"],[0,"\"\n    //"]],"start1":580,"start2":580,"length1":16,"length2":21},{"diffs":[[0," ispush("],[1,"pin: DigitalPin"],[0,"): boole"]],"start1":636,"start2":636,"length1":16,"length2":31},{"diffs":[[0,"    if( "],[-1,"press"],[1,"before"],[0,"status ="]],"start1":1030,"start2":1030,"length1":21,"length2":22},{"diffs":[[0,"atus == "],[-1,"false"],[1,"BUTTON_RELEASED"],[0," ){\n    "]],"start1":1046,"start2":1046,"length1":21,"length2":31},{"diffs":[[0,"    "],[-1,"pressstatus = true\n            }\n        }\n        else\n        {\n            if (pressstatus == true) {\n                /* 離された */\n                pressstatus = false\n\n                if( buttonmode == ButtonMode.toggle )\n                {\n                    if( beforetoggle = false){\n                        beforetoggle = true;\n                        pins.digitalWritePin(ledpin,1)\n                    }\n                    else{\n                        beforetoggle = false;\n                        pins.digitalWritePin(ledpin, 0)\n                    }\n                }\n            }\n        }    \n        basic.pause(100)"],[1,"beforestatus = BUTTON_PRESSED\n            }\n            \n        }        "],[0,"\n   "]],"start1":1112,"start2":1112,"length1":638,"length2":82}]}]},{"timestamp":1728603114960,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0," }\n\n"],[-1,"    const BUTTON_EVENT_ID = 1001\n"],[0,"    "]],"start1":260,"start2":260,"length1":41,"length2":8},{"diffs":[[0,"= 1\n"],[-1,"    const LED_ON = 0\n    const LED_OFF = 1\n"],[0,"    "]],"start1":319,"start2":319,"length1":51,"length2":8},{"diffs":[[0," 0)\n"],[-1,"        pressstatus = false\n        beforetoggle = false\n"],[0,"    "]],"start1":687,"start2":687,"length1":65,"length2":8},{"diffs":[[0," }\n\n"],[-1,"    //% block=\"ONになっている\"\n    //% weight=100   \n    export function ison(): boolean {\n        return beforetoggle\n    }\n\n"],[0,"    "]],"start1":813,"start2":813,"length1":128,"length2":8},{"diffs":[[0,"    "],[-1,"// ボタンが押されたときのイベントハンドラ\n    //% blockId=on_button_pressed block=\"ボタンが押されたとき\"\n    export function onButtonPressed(handler: () => void): void {\n        control.onEvent(BUTTON_EVENT_ID, BUTTON_PRESSED, handler)\n    }\n\n    control.inBackground"],[1,"basic.forever"],[0,"(fun"]],"start1":1029,"start2":1029,"length1":246,"length2":21},{"diffs":[[0,"toggle ="],[-1,"="],[0," false){"]],"start1":1487,"start2":1487,"length1":17,"length2":16},{"diffs":[[0,"pin,"],[-1,"LED_ON"],[1,"1"],[0,")\n  "]],"start1":1597,"start2":1597,"length1":14,"length2":9},{"diffs":[[0,"pin,"],[-1,"LED_OFF"],[1," 0"],[0,")\n  "]],"start1":1746,"start2":1746,"length1":15,"length2":10},{"diffs":[[0,"  }\n"],[-1,"                else\n                {\n                    // ボタンが押されたときにイベントを発生\n                    control.raiseEvent(BUTTON_EVENT_ID, BUTTON_PRESSED)\n                }\n"],[0,"    "]],"start1":1790,"start2":1790,"length1":179,"length2":8}]}]},{"timestamp":1728603671432,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ock "],[-1,"type=\"device_forever\" x=\"258\" y=\"-56\"></block><block "],[0,"type"]],"start1":81,"start2":81,"length1":61,"length2":8},{"diffs":[[0," x=\""],[-1,"5"],[0,"0\" y=\""],[-1,"5"],[0,"0\"><"]],"start1":104,"start2":104,"length1":16,"length2":14},{"diffs":[[0,"pe=\""],[-1,"turn_button_on"],[1,"device_forever"],[0,"\" x=\""],[1,"31"],[0,"5"],[-1,"4"],[0,"\" y=\""],[-1,"238"],[1,"0"],[0,"\"><s"]],"start1":309,"start2":309,"length1":37,"length2":36},{"diffs":[[0,"pe=\""],[-1,"basic_show_icon\"><field name=\"i\">IconNames.Heart</field></block></statement></block"],[1,"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow"],[0,"><bl"]],"start1":378,"start2":378,"length1":91,"length2":137},{"diffs":[[0,"pe=\""],[-1,"turn_"],[1,"IMLled"],[0,"button_"],[-1,"off\" x=\"322\" y=\"237\""],[1,"ispush\"></block></value"],[0,"><st"]],"start1":521,"start2":521,"length1":40,"length2":44},{"diffs":[[0,"statement name=\""],[-1,"HANDLER"],[1,"DO0"],[0,"\"><block type=\"b"]],"start1":563,"start2":563,"length1":39,"length2":35},{"diffs":[[0,"mes."],[-1,"Yes"],[1,"Heart"],[0,"</fi"]],"start1":636,"start2":636,"length1":11,"length2":13},{"diffs":[[0,"nt><"],[-1,"/block><block type=\"controls_if\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"406\" y=\"383\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"IMLledbutton_ison\" disabled-reasons=\"MANUALLY_DISABLED\""],[1,"statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement"],[0,"></b"]],"start1":670,"start2":670,"length1":294,"length2":84},{"diffs":[[0,"block></"],[-1,"value"],[1,"statement"],[0,"></block"]],"start1":753,"start2":753,"length1":21,"length2":25}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"ton."],[-1,"turnButtonOn(function () {\n    basic.showIcon(IconNames.Heart)\n})\nIMLledbutton.turnButtonOff(function () {\n    basic.showIcon(IconNames.Yes)\n})\nIMLledbutton.setomode(IMLledbutton.ButtonMode.toggle, DigitalPin.P1)\nbasic.forever(function () {\n\t"],[1,"setomode(IMLledbutton.ButtonMode.toggle, DigitalPin.P1)\nbasic.forever(function () {\n    if (IMLledbutton.ispush()) {\n        basic.showIcon(IconNames.Heart)\n    } else {\n        basic.clearScreen()\n    }"],[0,"\n})\n"]],"start1":9,"start2":9,"length1":250,"length2":211}]},{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"= 1\n"],[-1,"    const BUTTON_TURNON = 1\n    const BUTTON_TURNOFF = 2\n"],[0,"    "]],"start1":352,"start2":352,"length1":65,"length2":8},{"diffs":[[0,"ED_ON = "],[-1,"1"],[1,"0"],[0,"\n    con"]],"start1":367,"start2":367,"length1":17,"length2":17},{"diffs":[[0,"D_OFF = "],[-1,"0"],[1,"1"],[0,"\n    let"]],"start1":389,"start2":389,"length1":17,"length2":17},{"diffs":[[0,"  }\n"],[1,"\n"],[0,"   "],[-1," // ボタンがONになったときのイベントハンドラ\n    //% blockId=turn_button_on block=\"ボタンがONになったとき\"\n    export function turnButtonOn(handler: () => void): void {\n        control.onEvent(BUTTON_EVENT_ID, BUTTON_TURNON, handler)\n    }\n    // ボタンがOFFになったときのイベントハンドラ\n    //% blockId=turn_button_off block=\"ボタンがOFFになったとき\"\n    export function turnButtonOff(handler: () => void): void {\n        control.onEvent(BUTTON_EVENT_ID, BUTTON_TURNOFF, handler)\n    }\n\n    basic.forever(function() {\n    /*"],[0," con"]],"start1":1495,"start2":1495,"length1":479,"length2":12},{"diffs":[[0,"tion() {"],[-1," */"],[0,"\n       "]],"start1":1529,"start2":1529,"length1":19,"length2":16},{"diffs":[[0,"ON)\n"],[-1,"                        // ONになったときにイベントを発生\n                        control.raiseEvent(BUTTON_EVENT_ID, BUTTON_TURNON)\n"],[0,"    "]],"start1":2084,"start2":2084,"length1":127,"length2":8},{"diffs":[[0,"FF)\n"],[-1,"                        // OFFになったときにイベントを発生\n                        control.raiseEvent(BUTTON_EVENT_ID, BUTTON_TURNOFF)\n"],[0,"    "]],"start1":2239,"start2":2239,"length1":129,"length2":8}]}]},{"timestamp":1728604231971,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"x=\"2"],[-1,"0"],[1,"5"],[0,"8\" y=\"-"],[-1,"10"],[1,"5"],[0,"6\"><"]],"start1":107,"start2":107,"length1":18,"length2":17},{"diffs":[[0," x=\""],[1,"5"],[0,"0\" y=\""],[1,"5"],[0,"0\"><"]],"start1":157,"start2":157,"length1":14,"length2":16},{"diffs":[[0," x=\""],[1,"5"],[0,"4\" y=\""],[-1,"18"],[1,"23"],[0,"8\"><"]],"start1":383,"start2":383,"length1":16,"length2":17},{"diffs":[[0," x=\""],[1,"3"],[0,"2"],[-1,"7"],[0,"2\" y=\""],[-1,"18"],[1,"23"],[0,"7\"><"]],"start1":551,"start2":551,"length1":18,"length2":18},{"diffs":[[0," x=\""],[-1,"35"],[1,"40"],[0,"6\" y=\"3"],[-1,"3"],[1,"8"],[0,"3\"><"]],"start1":766,"start2":766,"length1":18,"length2":18}]},{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"ght="],[-1,"99"],[1,"100"],[0,"   \n"]],"start1":922,"start2":922,"length1":10,"length2":11},{"diffs":[[0,"ght="],[-1,"98   \n    export function ison(): boolean {\n        return beforetoggle\n    }\n\n    //% block=\"OFFになっている\"\n    //% weight=97"],[1,"100"],[0,"   \n"]],"start1":1043,"start2":1043,"length1":130,"length2":11},{"diffs":[[0,"ak;\n"],[-1,"            case DigitalPin.P0:\n                buttonpin = DigitalPin.P1\n                ledpin = DigitalPin.P0\n                break;\n            case DigitalPin.P2:\n                buttonpin = DigitalPin.P12\n                ledpin = DigitalPin.P2\n                break;\n            case DigitalPin.P15:\n                buttonpin = DigitalPin.P16\n                ledpin = DigitalPin.P15\n                break;\n"],[0,"    "]],"start1":1318,"start2":1318,"length1":420,"length2":8},{"diffs":[[0,"tion() {"],[-1," "],[0,"\n    /* "]],"start1":2012,"start2":2012,"length1":17,"length2":16},{"diffs":[[0,"n() { */"],[-1," "],[0,"\n       "]],"start1":2056,"start2":2056,"length1":17,"length2":16}]}]},{"timestamp":1728604822246,"editorVersion":"7.0.42","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ver\""],[-1," id=\"(LFzdNceH57$y7i!gUkw\""],[0," x=\""]],"start1":102,"start2":102,"length1":34,"length2":8},{"diffs":[[0,"pe=\""],[-1,"IMLledbutton_setomode\" id=\"W,H*fcN,z%R/k]R~Lw7.\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"331\" y=\"32\"><field name=\"m\">IMLledbutton.ButtonMode.toggle</field><field name=\"pin\">DigitalPin.P0</field></block><block type=\"pxt-on-start\" id=\"{Gab4^ros4`^7A(oZ%rk"],[1,"pxt-on-start"],[0,"\" x=\""],[-1,"39"],[1,"0"],[0,"\" y=\""],[-1,"54"],[1,"0"],[0,"\"><s"]],"start1":141,"start2":141,"length1":290,"length2":32},{"diffs":[[0,"ode\""],[-1," id=\"oQ@au$4XR7LPA2jNnq@p\""],[0,"><fi"]],"start1":228,"start2":228,"length1":34,"length2":8},{"diffs":[[0,"_on\""],[-1," id=\"95IG+q,!eh1C~{dh`f@9\""],[0," x=\""]],"start1":378,"start2":378,"length1":34,"length2":8},{"diffs":[[0,"con\""],[-1," id=\"XD/}=v,k67qfBH*;r}-$\""],[0,"><fi"]],"start1":448,"start2":448,"length1":34,"length2":8},{"diffs":[[0,"off\""],[-1," id=\"$0$8)_Pdm`0b+$QU,yhx\""],[0," x=\""]],"start1":545,"start2":545,"length1":34,"length2":8},{"diffs":[[0,"con\""],[-1," id=\"iVsUGpEjt6]VhKLHvK7Y\""],[0,"><fi"]],"start1":617,"start2":617,"length1":34,"length2":8},{"diffs":[[0,"_if\""],[-1," id=\"bKxq5u-vh0Z0GtM;c$|Y\""],[0," dis"]],"start1":708,"start2":708,"length1":34,"length2":8},{"diffs":[[0,"ean\""],[-1," id=\"AtzZ/V]Q$4GQGuNdg7^s\""],[0,"><fi"]],"start1":853,"start2":853,"length1":34,"length2":8},{"diffs":[[0,"son\""],[-1," id=\"BV9aMCc+|*~emo^WX(9B\""],[0," dis"]],"start1":925,"start2":925,"length1":34,"length2":8}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[1,"IMLledbutton.turnButtonOn(function () {\n    basic.showIcon(IconNames.Heart)\n})\nIMLledbutton.turnButtonOff(function () {\n    basic.showIcon(IconNames.Yes)\n})\nIMLledbutton.setomode(IMLledbutton.ButtonMode.toggle, DigitalPin.P1)\nbasic.forever(function () {\n\t\n})\n"]],"start1":0,"start2":0,"length1":0,"length2":259}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," ],\n"],[-1,"    \"testFiles\": [\n        \"test.ts\"\n    ],\n"],[0,"    "]],"start1":252,"start2":252,"length1":52,"length2":8}]},{"type":"edited","filename":"ledbutton.ts","patch":[{"diffs":[[0,"tion iso"],[-1,"ff"],[1,"n"],[0,"(): bool"]],"start1":1187,"start2":1187,"length1":18,"length2":17},{"diffs":[[0,"urn "],[-1,"!"],[0,"befo"]],"start1":1221,"start2":1221,"length1":9,"length2":8},{"diffs":[[0,"とき\"\n"],[-1,"    //% weight=80   \n"],[0,"    "]],"start1":1945,"start2":1945,"length1":29,"length2":8},{"diffs":[[0,"> void): void {\n"],[1,""],[0,"        control."]],"start1":1998,"start2":1998,"length1":32,"length2":32},{"diffs":[[0,"とき\"\n"],[-1,"    //% weight=79   \n"],[0,"    "]],"start1":2163,"start2":2163,"length1":29,"length2":8},{"diffs":[[0,"になったときのイベントハンドラ\n"],[1,""],[0,"    //% blockId="]],"start1":2314,"start2":2314,"length1":32,"length2":32},{"diffs":[[0,"とき\"\n"],[-1,"    //% weight=78   \n"],[0,"    "]],"start1":2380,"start2":2380,"length1":29,"length2":8}]},{"type":"added","filename":"test.ts","value":"// テストはここに来ます。このパッケージが拡張機能として使用されるときにはコンパイルされません。\n"}]}],"snapshots":[{"timestamp":1728567368971,"editorVersion":"7.0.42","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"ledbutton\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1728569885830,"editorVersion":"7.0.42","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"IMLledbutton_isbush\"><field name=\"pin\">DigitalPin.P1</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement></block></statement></block></xml>","main.ts":"basic.forever(function () {\n    if (IMLledbutton.isbush(DigitalPin.P1)) {\n        basic.showIcon(IconNames.Heart)\n    } else {\n        basic.clearScreen()\n    }\n})\n","README.md":"","ledbutton.ts":"/**\n * Custom blocks\n */\n//% weight=100 color=#0fbc11 icon=\"\" block=\"LEDボタン\"\nnamespace IMLledbutton {\n\n    //% block\n    //% block=\"押されている %pin\"\n    //% weight=100   \n    export function isbush(pin: DigitalPin): boolean {\n        \n        if (pins.digitalReadPin(pin) == 1) {\n            return true\n        }\n        else {\n            return false\n        }\n    }\n}\n","pxt.json":"{\n    \"name\": \"ledbutton\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"ledbutton.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1728571858315,"editorVersion":"7.0.42","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"IMLledbutton_isbush\"><field name=\"pin\">DigitalPin.P2</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement></block></statement></block></xml>","main.ts":"basic.forever(function () {\n    if (IMLledbutton.isbush(DigitalPin.P2)) {\n        basic.showIcon(IconNames.Heart)\n    } else {\n        basic.clearScreen()\n    }\n})\n","README.md":"","ledbutton.ts":"/**\n * Custom blocks\n */\n//% weight=100 color=#0fbc11 icon=\"\" block=\"LEDボタン\"\nnamespace IMLledbutton {\n\n    //% block\n    //% block=\"押されている %pin\"\n    //% weight=100   \n    export function isbush(pin: DigitalPin): boolean {\n        \n        if (pins.digitalReadPin(pin) == 1) {\n            return false\n        }\n        else {\n            return true\n        }\n    }\n}\n","pxt.json":"{\n    \"name\": \"ledbutton\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"ledbutton.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1728573769807,"editorVersion":"7.0.42","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"IMLledbutton_isbush\"><field name=\"pin\">DigitalPin.P2</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement></block></statement></block></xml>","main.ts":"basic.forever(function () {\n    if (IMLledbutton.ispush(DigitalPin.P2)) {\n        basic.showIcon(IconNames.Heart)\n    } else {\n        basic.clearScreen()\n    }\n})\n","README.md":"","ledbutton.ts":"/**\n * Custom blocks\n */\n//% weight=100 color=#0fbc11 icon=\"\" block=\"LEDボタン\"\nnamespace IMLledbutton {\n\n    enum buttonmode {\n        //% block=\"トグルボタン\"\n        toggle = 1,\n        //% block=\"プッシュボタン\"\n        push = 2\n    }\n\n    let buttonpin=DigitalPin.P2\n    let ledpin=DigitalPin.P1\n    let mode=buttonmode.push\n    let status=0\n\n    //% block=\"モード設定 %mode\"\n    //% weight=100\n    export function setmode(m: buttonmode){\n        mode=m\n    }\n\n    //% block=\"押されている %pin\"\n    //% weight=100   \n    export function ispush(pin: DigitalPin): boolean {\n        setpin(pin)\n        if (pins.digitalReadPin(buttonpin) == 1) {\n            return false\n        }\n        else {\n            if( mode == buttonmode.toggle ){\n                if( status == 0 ){\n                    status = 1;\n                    pins.digitalWritePin(ledpin,1)\n                }\n                else{\n                    status = 0;\n                    pins.digitalWritePin(ledpin,0)\n                }\n                basic.pause(100)\n            }\n            return true\n        }\n    }\n\n    function setpin(pin: DigitalPin)\n    {\n        switch(pin){\n            case DigitalPin.P1:\n                buttonpin=DigitalPin.P2\n                ledpin=DigitalPin.P1\n                break\n        }\n    }\n\n    const BUTTON_EVENT_ID = 1001\n    const BUTTON_PRESSED = 1\n    let buttonPin = DigitalPin.P1\n    let lastState = 0\n\n    // ボタンが押されたときのイベントハンドラ\n    //% blockId=on_button_pressed block=\"ボタンが押されたとき\"\n    export function onButtonPressed(handler: () => void): void {\n        control.onEvent(BUTTON_EVENT_ID, BUTTON_PRESSED, handler)\n    }\n\n    // ボタンの状態を定期的にチェック\n    control.inBackground(function () {\n        while (true) {\n            let currentState = pins.digitalReadPin(buttonPin)\n            if (currentState == 1 && lastState == 0) {\n                // ボタンが押されたときにイベントを発生\n                control.raiseEvent(BUTTON_EVENT_ID, BUTTON_PRESSED)\n            }\n            lastState = currentState\n            basic.pause(50) // 50msごとにチェック\n        }\n    })\n}\n","pxt.json":"{\n    \"name\": \"ledbutton\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"ledbutton.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1728598860434,"editorVersion":"7.0.42","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"IMLledbutton_isbush\"><field name=\"pin\">DigitalPin.P2</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement></block></statement></block></xml>","main.ts":"basic.forever(function () {\n    if (IMLledbutton.ispush(DigitalPin.P2)) {\n        basic.showIcon(IconNames.Heart)\n    } else {\n        basic.clearScreen()\n    }\n})\n","README.md":"","ledbutton.ts":"/**\n * Custom blocks\n */\n//% weight=100 color=#0fbc11 icon=\"\" block=\"LEDボタン\"\nnamespace IMLledbutton {\n\n    enum buttonmode {\n        //% block=\"トグルボタン\"\n        toggle = 1,\n        //% block=\"プッシュボタン\"\n        push = 2\n    }\n\n    const BUTTON_PRESSED = 0\n    const BUTTON_EVENT_ID = 1001\n    let buttonpin=DigitalPin.P2\n    let ledpin=DigitalPin.P1\n    let mode=buttonmode.push\n    let beforestatus=false\n    let togglestatus=false\n\n    //% block=\"モード設定 %mode\"\n    //% weight=100\n    export function setmode(m: buttonmode){\n        mode=m\n    }\n\n    //% block=\"押されている %pin\"\n    //% weight=100   \n    export function ispush(pin: DigitalPin): boolean {\n        setpin(pin)\n        if (pins.digitalReadPin(buttonpin) == BUTTON_PRESSED) {\n            beforestatus=true\n            return true\n        }\n        else{\n            if(beforestatus==true){\n                beforestatus=false;\n                if(mode==buttonmode.toggle){\n                    if(togglestatus==false){\n                        togglestatus=true;\n                        pins.digitalWritePin(ledpin,1)\n                    }\n                    else{\n                        pins.digitalWritePin(ledpin, 0)\n                    }\n                }\n            }\n            return false\n        }\n    }\n\n    function setpin(pin: DigitalPin)\n    {\n        switch(pin){\n            case DigitalPin.P1:\n                buttonpin=DigitalPin.P2\n                ledpin=DigitalPin.P1\n                break\n        }\n    }\n\n    // ボタンが押されたときのイベントハンドラ\n    //% blockId=on_button_pressed block=\"ボタンが押されたとき\"\n    export function onButtonPressed(handler: () => void): void {\n        control.onEvent(BUTTON_EVENT_ID, BUTTON_PRESSED, handler)\n    }\n}\n","pxt.json":"{\n    \"name\": \"ledbutton\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"ledbutton.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1728601926449,"editorVersion":"7.0.42","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation else=\"1\"></mutation></block></statement></block></xml>","main.ts":"basic.forever(function () {\n    if (IMLledbutton.ispush(DigitalPin.P2)) {\n        basic.showIcon(IconNames.Heart)\n    } else {\n        basic.clearScreen()\n    }\n})\n","README.md":"","ledbutton.ts":"basic.forever(function () {\n\n})\n\n\n\n//% block=\"モード設定 %m %pin\"\n//% weight=100   \nexport function ispush(m: buttonmode, pin: DigitalPin): boolean {\n    return pressstatus\n}\n\n//% block=\"押されている %pin\"\n//% weight=100   \nexport function ispush(pin: DigitalPin): boolean {\n    return pressstatus\n}\n","pxt.json":"{\n    \"name\": \"ledbutton\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"ledbutton.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1728603739982,"editorVersion":"7.0.42","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"IMLledbutton_setomode\"><field name=\"m\">IMLledbutton.ButtonMode.toggle</field><field name=\"pin\">DigitalPin.P1</field></block></statement></block><block type=\"device_forever\" x=\"315\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"IMLledbutton_ispush\"></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Heart</field></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"></block></statement></block></statement></block></xml>","main.ts":"","README.md":"","ledbutton.ts":"basic.forever(function () {\n\n})\n\n/**\n * Custom blocks\n */\n//% weight=100 color=#0fbc11 icon=\"\" block=\"LEDボタン\"\nnamespace IMLledbutton\n{\n    export enum ButtonMode {\n        //% block=\"トグルボタン\"\n        toggle = 1,\n        //% block=\"プッシュボタン\"\n        push = 2\n    }\n\n    const BUTTON_EVENT_ID = 1001\n    const BUTTON_PRESSED = 0\n    const BUTTON_RELEASED = 1\n    const LED_ON = 0\n    const LED_OFF = 1\n    let pressstatus = false\n    let beforetoggle = false\n    let buttonmode = ButtonMode.toggle;\n    let buttonpin = DigitalPin.P2\n    let ledpin = DigitalPin.P1\n\n    //% block=\"モード設定 %m %pin\"\n    //% weight=100   \n    export function setomode(mode: ButtonMode, pin: DigitalPin) {\n        buttonmode = mode;\n        setpin(pin)\n        pins.digitalWritePin(ledpin, 0)\n        pressstatus = false\n        beforetoggle = false\n    }\n\n    //% block=\"押されている\"\n    //% weight=100   \n    export function ispush(): boolean {\n        return pressstatus\n    }\n\n    //% block=\"ONになっている\"\n    //% weight=100   \n    export function ison(): boolean {\n        return beforetoggle\n    }\n\n    function setpin(pin: DigitalPin){\n        switch(pin){\n            case DigitalPin.P1:\n                buttonpin = DigitalPin.P2\n                ledpin = DigitalPin.P1\n                break;\n        }\n    }\n\n    // ボタンが押されたときのイベントハンドラ\n    //% blockId=on_button_pressed block=\"ボタンが押されたとき\"\n    export function onButtonPressed(handler: () => void): void {\n        control.onEvent(BUTTON_EVENT_ID, BUTTON_PRESSED, handler)\n    }\n\n    control.inBackground(function() {\n        if( pins.digitalReadPin(buttonpin) == BUTTON_PRESSED )\n        {\n            if( pressstatus == false ){\n                /* 押された */\n                pressstatus = true\n            }\n        }\n        else\n        {\n            if (pressstatus == true) {\n                /* 離された */\n                pressstatus = false\n\n                if( buttonmode == ButtonMode.toggle )\n                {\n                    if( beforetoggle == false){\n                        beforetoggle = true;\n                        pins.digitalWritePin(ledpin,LED_ON)\n                    }\n                    else{\n                        beforetoggle = false;\n                        pins.digitalWritePin(ledpin,LED_OFF)\n                    }\n                }\n                else\n                {\n                    // ボタンが押されたときにイベントを発生\n                    control.raiseEvent(BUTTON_EVENT_ID, BUTTON_PRESSED)\n                }\n            }\n        }    \n        basic.pause(100)\n    })\n}\n","pxt.json":"{\n    \"name\": \"ledbutton\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"ledbutton.ts\"\n    ],\n    \"preferredEditor\": \"blocksprj\"\n}\n"}}],"shares":[],"lastSaveTime":1728605044730}